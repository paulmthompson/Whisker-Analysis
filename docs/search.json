[
  {
    "objectID": "concepts/parameterization/point.html#whisker-length",
    "href": "concepts/parameterization/point.html#whisker-length",
    "title": "Position Along Whisker",
    "section": "Whisker Length",
    "text": "Whisker Length",
    "crumbs": [
      "Background and Concepts",
      "Whisker Parameterization",
      "Position Along Whisker"
    ]
  },
  {
    "objectID": "concepts/parameterization/point.html#whisker-point",
    "href": "concepts/parameterization/point.html#whisker-point",
    "title": "Position Along Whisker",
    "section": "Whisker Point",
    "text": "Whisker Point",
    "crumbs": [
      "Background and Concepts",
      "Whisker Parameterization",
      "Position Along Whisker"
    ]
  },
  {
    "objectID": "concepts/parameterization/mask.html",
    "href": "concepts/parameterization/mask.html",
    "title": "Fur Masking",
    "section": "",
    "text": "If the animal is head-fixed, probably easiest to just make a mask quickly in photoshop",
    "crumbs": [
      "Background and Concepts",
      "Whisker Parameterization",
      "Fur Masking"
    ]
  },
  {
    "objectID": "concepts/parameterization/mask.html#mask-generation",
    "href": "concepts/parameterization/mask.html#mask-generation",
    "title": "Fur Masking",
    "section": "",
    "text": "If the animal is head-fixed, probably easiest to just make a mask quickly in photoshop",
    "crumbs": [
      "Background and Concepts",
      "Whisker Parameterization",
      "Fur Masking"
    ]
  },
  {
    "objectID": "concepts/parameterization/mask.html#extending-mask",
    "href": "concepts/parameterization/mask.html#extending-mask",
    "title": "Fur Masking",
    "section": "Extending Mask",
    "text": "Extending Mask",
    "crumbs": [
      "Background and Concepts",
      "Whisker Parameterization",
      "Fur Masking"
    ]
  },
  {
    "objectID": "concepts/parameterization/mask.html#mask-intersection",
    "href": "concepts/parameterization/mask.html#mask-intersection",
    "title": "Fur Masking",
    "section": "Mask Intersection",
    "text": "Mask Intersection",
    "crumbs": [
      "Background and Concepts",
      "Whisker Parameterization",
      "Fur Masking"
    ]
  },
  {
    "objectID": "concepts/parameterization/discretization.html",
    "href": "concepts/parameterization/discretization.html",
    "title": "Discretization",
    "section": "",
    "text": "Minimum points to specify shape\nReducing points -&gt; how do we know if fit is preserved?",
    "crumbs": [
      "Background and Concepts",
      "Whisker Parameterization",
      "Discretization"
    ]
  },
  {
    "objectID": "concepts/parameterization/discretization.html#density-of-points",
    "href": "concepts/parameterization/discretization.html#density-of-points",
    "title": "Discretization",
    "section": "",
    "text": "Minimum points to specify shape\nReducing points -&gt; how do we know if fit is preserved?",
    "crumbs": [
      "Background and Concepts",
      "Whisker Parameterization",
      "Discretization"
    ]
  },
  {
    "objectID": "concepts/parameterization/discretization.html#interpolation-methods",
    "href": "concepts/parameterization/discretization.html#interpolation-methods",
    "title": "Discretization",
    "section": "Interpolation Methods",
    "text": "Interpolation Methods\n\nLinear Interpolation\n\n\nQuadratic Interpolation",
    "crumbs": [
      "Background and Concepts",
      "Whisker Parameterization",
      "Discretization"
    ]
  },
  {
    "objectID": "concepts/parameterization/discretization.html#extrapolation",
    "href": "concepts/parameterization/discretization.html#extrapolation",
    "title": "Discretization",
    "section": "Extrapolation",
    "text": "Extrapolation\nFigure: Whisker shorter than contact point",
    "crumbs": [
      "Background and Concepts",
      "Whisker Parameterization",
      "Discretization"
    ]
  },
  {
    "objectID": "concepts/kinematics/curvature.html",
    "href": "concepts/kinematics/curvature.html",
    "title": "Curvature",
    "section": "",
    "text": "One of the most salient parameters that can characterize the shape of a whisker is the degree of bending of the whisker when it encounters an object. For some line in space",
    "crumbs": [
      "Background and Concepts",
      "Kinematics",
      "Curvature"
    ]
  },
  {
    "objectID": "concepts/kinematics/curvature.html#overview",
    "href": "concepts/kinematics/curvature.html#overview",
    "title": "Curvature",
    "section": "",
    "text": "One of the most salient parameters that can characterize the shape of a whisker is the degree of bending of the whisker when it encounters an object. For some line in space",
    "crumbs": [
      "Background and Concepts",
      "Kinematics",
      "Curvature"
    ]
  },
  {
    "objectID": "concepts/kinematics/curvature.html#methods",
    "href": "concepts/kinematics/curvature.html#methods",
    "title": "Curvature",
    "section": "Methods",
    "text": "Methods\n\\(k(x) = \\frac{y''(x)}{(1 + (y'(x))^2)^\\frac{3}{2}}\\)\n\nDirect Calculation via Finite Differences\nPros:\nSimple\nCons:\nSusceptible to noisy variation from point to point\ncentral differences are poorly defined within unequal spacing between points\n\n\n2nd Order Polynomial\nCurvature is well defined for a parabola at any position x according to the following equation:\n\\(k(x) = \\frac{2a}{(1 + (2ax + b)^2)^\\frac{3}{2})}\\)\nPros:\nLeverages more points for calculation of curvature to reduce noise\nCons:\nParabola fit may be poor for some orientations of points.\nThe part of the parabola fitting the whiskers will change as the whisker moves. While the curvature is specified for any point along the parabola, there may be position-dependent fitting noise that results.\nhttps://en.wikipedia.org/wiki/Curvature#Local_expressions\n\n\nAlternative Strategies (Not implemented):\n\nBezier Curve\n\n\nRadius of Curvature of Circle",
    "crumbs": [
      "Background and Concepts",
      "Kinematics",
      "Curvature"
    ]
  },
  {
    "objectID": "concepts/kinematics/curvature.html#intrinsic-curvature-and-ùùôùõã",
    "href": "concepts/kinematics/curvature.html#intrinsic-curvature-and-ùùôùõã",
    "title": "Curvature",
    "section": "Intrinsic Curvature and ùùôùõã",
    "text": "Intrinsic Curvature and ùùôùõã\nWhiskers are not straight, and generally have some natural bending at rest. Consequently, forces and moments generated in the follicular complex occur not because of the existence of curvature, but because of changes from the inherent curvature.\nNote that as the whisker moves during whisking in air there is some true change in curvature of the whisker from its intrinsic position, as well as noise that results from measurement error in whisker parameterization, 3D whisker rotation in the 2D plane that is not accounted for.",
    "crumbs": [
      "Background and Concepts",
      "Kinematics",
      "Curvature"
    ]
  },
  {
    "objectID": "concepts/kinematics/angle.html#angle-at-arbitrary-point",
    "href": "concepts/kinematics/angle.html#angle-at-arbitrary-point",
    "title": "Whisker Angle",
    "section": "Angle at Arbitrary Point",
    "text": "Angle at Arbitrary Point",
    "crumbs": [
      "Background and Concepts",
      "Kinematics",
      "Whisker Angle"
    ]
  },
  {
    "objectID": "concepts/parameterization/beam_parameters.html#displacement-from-normal-line",
    "href": "concepts/parameterization/beam_parameters.html#displacement-from-normal-line",
    "title": "Beam Parameterization",
    "section": "Displacement from normal line",
    "text": "Displacement from normal line\n\nStraight Beam\n\n\nIncorporating Curvature",
    "crumbs": [
      "Background and Concepts",
      "Whisker Parameterization",
      "Beam Parameterization"
    ]
  },
  {
    "objectID": "concepts/parameterization/follicle.html#base-of-whisker-path",
    "href": "concepts/parameterization/follicle.html#base-of-whisker-path",
    "title": "Follicle",
    "section": "Base of Whisker Path",
    "text": "Base of Whisker Path",
    "crumbs": [
      "Background and Concepts",
      "Whisker Parameterization",
      "Follicle"
    ]
  },
  {
    "objectID": "concepts/parameterization/follicle.html#mask-intersection",
    "href": "concepts/parameterization/follicle.html#mask-intersection",
    "title": "Follicle",
    "section": "Mask Intersection",
    "text": "Mask Intersection",
    "crumbs": [
      "Background and Concepts",
      "Whisker Parameterization",
      "Follicle"
    ]
  },
  {
    "objectID": "concepts/parameterization/follicle.html#fixed-distance-from-extended-mask-intersection",
    "href": "concepts/parameterization/follicle.html#fixed-distance-from-extended-mask-intersection",
    "title": "Follicle",
    "section": "Fixed Distance from Extended Mask Intersection",
    "text": "Fixed Distance from Extended Mask Intersection",
    "crumbs": [
      "Background and Concepts",
      "Whisker Parameterization",
      "Follicle"
    ]
  },
  {
    "objectID": "concepts/parameterization/parameter_overview.html",
    "href": "concepts/parameterization/parameter_overview.html",
    "title": "Parameterization Overview",
    "section": "",
    "text": "Rodent whiskers (vibrissa) are specialized hair follicles on the face. The position of these whiskers are organized in a highly stereotyped grid with rows and columns. The most posterior whiskers are slightly offset from the rest of the grid and are labeled with Greek letters from dorsal to ventral: alpha, beta, gamma, delta. The remaining whiskers are labeled with rows A-E, with A the most dorsal, and columns numbered starting from the most posterior.\nFigure: side profile of whiskers\n\n\n\nWhiskers are truncated cones. More posterior whiskers are generally longer and greater in diameter than more anterior whiskers.\nFigure: 3d structure of whisker",
    "crumbs": [
      "Background and Concepts",
      "Whisker Parameterization",
      "Parameterization Overview"
    ]
  },
  {
    "objectID": "concepts/parameterization/parameter_overview.html#anatomy",
    "href": "concepts/parameterization/parameter_overview.html#anatomy",
    "title": "Parameterization Overview",
    "section": "",
    "text": "Rodent whiskers (vibrissa) are specialized hair follicles on the face. The position of these whiskers are organized in a highly stereotyped grid with rows and columns. The most posterior whiskers are slightly offset from the rest of the grid and are labeled with Greek letters from dorsal to ventral: alpha, beta, gamma, delta. The remaining whiskers are labeled with rows A-E, with A the most dorsal, and columns numbered starting from the most posterior.\nFigure: side profile of whiskers\n\n\n\nWhiskers are truncated cones. More posterior whiskers are generally longer and greater in diameter than more anterior whiskers.\nFigure: 3d structure of whisker",
    "crumbs": [
      "Background and Concepts",
      "Whisker Parameterization",
      "Parameterization Overview"
    ]
  },
  {
    "objectID": "concepts/parameterization/parameter_overview.html#experimental-preperation",
    "href": "concepts/parameterization/parameter_overview.html#experimental-preperation",
    "title": "Parameterization Overview",
    "section": "Experimental Preperation",
    "text": "Experimental Preperation\n\n2D Whisker Imaging\nWhiskers are usually imaged in behavioral preparation with strong backlighting, such that they appear as dark shadows across a white background.\nFigure: Cartoon of whisker from top view\n\n\n3D Whisker Imaging\n\n\nWhisker Parameterization\nWe cannot analyze pictures. Instead, we need to describe the whisker in a numerical way for further processing. For this purpose, we can define the position of the whisker in space as a collection of points\n\\((x_1,y_1), (x_2,y_2), ... (x_n,y_n)\\)\nThese points are ordered to define a path along the whisker. We will define the first point as being most proximal, while the last point is most distal.\nThe spacing between these points may not be uniform, and segments of the whisker may be missing.",
    "crumbs": [
      "Background and Concepts",
      "Whisker Parameterization",
      "Parameterization Overview"
    ]
  },
  {
    "objectID": "concepts/parameterization/parameter_overview.html#converting-whisker-masks-to-paths",
    "href": "concepts/parameterization/parameter_overview.html#converting-whisker-masks-to-paths",
    "title": "Parameterization Overview",
    "section": "Converting Whisker Masks to Paths",
    "text": "Converting Whisker Masks to Paths\n\nOrdering Points\nTraditional whisker tracing algorithms will result in a path of points, where increasing indices correspond to either increasing or decreasing distance along the whisker. However, some image processing algorithms, including deep learning, will result in a collection of pixels corresponding to the pixels likely to correspond to a whisker in a picture. These will not be ordered as a path. Consequently,\n\n\nAnalyzing Whisker Shape from Noisy Pixel Data\nWe have a list of pixels corresponding to whisker points in an image, potentially numbering in the hundreds for a standard camera resolution. The goal is to calculate meaningful quantities about the whisker, such as its angle in space, its curvature at various points, the angle of its tip, and potentially the forces and moments present at its base.\n\n\nChallenges of Noisy Data\nA primary consideration is that the point estimates for the whisker‚Äôs position are noisy. The algorithm used to generate these estimates is imperfect, introducing errors from the segmentation process. Additionally, noise arises from the imaging process itself. The camera might not resolve the whisker‚Äôs finer structure, or visualization could be hindered by obstructions like fur. Therefore, we are dealing with noisy points, subject to both random and correlated errors along the whisker‚Äôs length.\nDirectly using single points from this noisy collection for calculations can lead to error-prone estimates. For example, calculating the angle at the whisker base by selecting the base point and another point further along (e.g., at index 10 or 20) makes the calculation highly susceptible to the noise present at those specific positions. The base point is often one of the noisiest estimates due to its proximity to the fur.\n\n\nThe Need for Parameterization\nDespite the noise in individual points, a user looking at the image can often clearly discern the whisker‚Äôs angle because the overall shape is defined by many points. By parameterizing the whisker‚Äîusing all points to create a reduced estimate or fit‚Äîwe can average out the random variations in pixel positions and obtain better measurements.\n\n\nParameterization Strategy: Using an Independent Variable\nHow can we effectively parameterize the whisker? A simple approach for a 2D shape might be fitting a function like \\(y=f(x)\\), perhaps using a polynomial. However, this method is prone to errors. Consider a simple parabola: it‚Äôs well-fit by a second-order polynomial. But if this parabola rotates 90 degrees, a single \\(x\\) value might correspond to two \\(y\\) values, making such a fit perform poorly.\n\n\n\n\n\n\n\n\nFigure¬†1: Original and rotated parabola fits.\n\n\n\n\n\nTo overcome this, we can leverage the fact that the whisker points are ordered from base to tip. Let‚Äôs introduce a third variable, \\(t\\), representing the position along the whisker‚Äôs length. Instead of defining the whisker just as \\((x,y)\\) points, we define how \\(x\\) and \\(y\\) change independently as functions of \\(t\\): \\(x(t)\\) and \\(y(t)\\).\n\n\n\n\n\n\n\n\nFigure¬†2: Figure 2 shows the parameterized fits.\n\n\n\n\n\nRevisiting the parabola example, regardless of its rotation in 2D space, the \\(x\\)value as a function of \\(t\\) and the \\(y\\) value as a function of \\(t\\) remain smooth and well-defined.\n\n\nBenefits of Parameterization\nThis lower-dimensional parameterization ensures that quantities like angle and curvature between subsequent points are well-defined and change smoothly. This significantly reduces the error encountered when selecting specific raw data points for calculations.\nFurthermore, once the parameterization functions (\\(x(t)\\) and \\(y(t)\\)) are determined, we can easily calculate the whisker‚Äôs position at any point along its length (\\(t\\)) without needing to store a high resolution of points, making subsequent calculations efficient. Various strategies exist for parameterizing whisker functions, and generally, they are not overly complex for the typical shapes observed.",
    "crumbs": [
      "Background and Concepts",
      "Whisker Parameterization",
      "Parameterization Overview"
    ]
  },
  {
    "objectID": "concepts/parameterization/parameter_overview.html#follicle-location",
    "href": "concepts/parameterization/parameter_overview.html#follicle-location",
    "title": "Parameterization Overview",
    "section": "Follicle Location",
    "text": "Follicle Location\nThe base of the follicle is important for many whisker kinematic calculations, but it can be difficult to identify with tracking reliably.",
    "crumbs": [
      "Background and Concepts",
      "Whisker Parameterization",
      "Parameterization Overview"
    ]
  },
  {
    "objectID": "concepts/parameterization/parameter_overview.html#whisker-data-structure",
    "href": "concepts/parameterization/parameter_overview.html#whisker-data-structure",
    "title": "Parameterization Overview",
    "section": "Whisker Data Structure",
    "text": "Whisker Data Structure\nWhiskers are an array of 2D points\nWhiskers can correspond to to whisker IDs\nWhiskers can correspond to certain frames\nHDF5 for saving / loading\n\nPython\n\n\nJulia\n\n\nC++",
    "crumbs": [
      "Background and Concepts",
      "Whisker Parameterization",
      "Parameterization Overview"
    ]
  },
  {
    "objectID": "index.html",
    "href": "index.html",
    "title": "Whisker Analysis",
    "section": "",
    "text": "The Whisker Analysis package is designed to aid in the processing of high speed videos of whisker behaviors. The core of the library is written in C++, so it is lightning fast, but also comes with a python wrapper for ease of use."
  },
  {
    "objectID": "index.html#installation",
    "href": "index.html#installation",
    "title": "Whisker Analysis",
    "section": "Installation",
    "text": "Installation"
  },
  {
    "objectID": "index.html#features",
    "href": "index.html#features",
    "title": "Whisker Analysis",
    "section": "Features",
    "text": "Features\n\nWhisker video analysis - Includes a complete re-write of the Janelia Whisker Tracker\nWhisker Parameterization operations - Bezier fits,\nKinematic analysis - Angle, curvature, and phase calculations\nMechanical analysis - Force and moment calculations"
  },
  {
    "objectID": "index.html#how-documentation-is-organized",
    "href": "index.html#how-documentation-is-organized",
    "title": "Whisker Analysis",
    "section": "How Documentation is Organized",
    "text": "How Documentation is Organized\nThis documentation will follow the quadrants of the Di√°taxis documentation authoring framework\n\nTutorials\nHow-to Guides\nConcepts\nReference Guides"
  }
]